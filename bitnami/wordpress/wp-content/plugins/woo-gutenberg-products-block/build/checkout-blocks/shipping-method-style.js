"use strict";(self.webpackChunkwebpackWcBlocksJsonp=self.webpackChunkwebpackWcBlocksJsonp||[]).push([[7413],{17088:(e,i,t)=>{t.r(i),t.d(i,{default:()=>S});var s=t(69307),o=t(89814),c=t.n(o),n=t(80721),p=t(93685),r=t(9818),a=t(94801),l=t(5027),h=t(75271),d=t(65736),g=t(82279),u=t(23569),m=t(50693),k=t(19301),_=t(15371),w=t(30602),E=t(15770),b=t(82901),C=t(40156);t(96483);const T={hidden:!0,message:(0,d.__)("Shipping options are not available","woo-gutenberg-products-block")},R=({checked:e,rate:i,showPrice:t,showIcon:o,toggleText:n,multiple:p})=>(0,s.createElement)(g.Z,{value:"pickup",className:c()("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"pickup"===e})},!0===o&&(0,s.createElement)(m.Z,{icon:k.Z,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,s.createElement)("span",{className:"wc-block-checkout__shipping-method-option-title"},n),!0===t&&(0,s.createElement)(E.S,{multiple:p,minRate:i.min,maxRate:i.max})),v=({checked:e,rate:i,showPrice:t,showIcon:o,toggleText:n,shippingCostRequiresAddress:p=!1})=>{const l=(0,r.useSelect)((e=>e(a.CART_STORE_KEY).getShippingRates().some((({shipping_rates:e})=>!e.every(w.J3))))),h=p&&(()=>{const e=(0,r.select)("wc/store/validation"),i=e.getValidationError("shipping_state"),t=e.getValidationError("shipping_address_1"),s=e.getValidationError("shipping_country"),o=e.getValidationError("shipping_postcode");return[e.getValidationError("shipping_city"),i,t,s,o].some((e=>void 0!==e))})()&&!l,u=void 0!==i.min&&void 0!==i.max,{setValidationErrors:k,clearValidationError:b}=(0,r.useDispatch)(a.VALIDATION_STORE_KEY);(0,s.useEffect)((()=>{"shipping"!==e||u?b("shipping-rates-error"):k({"shipping-rates-error":T})}),[e,b,u,k]);const C=void 0===i.min||h?(0,s.createElement)("span",{className:"wc-block-checkout__shipping-method-option-price"},(0,d.__)("calculated with an address","woo-gutenberg-products-block")):(0,s.createElement)(E.S,{minRate:i.min,maxRate:i.max});return(0,s.createElement)(g.Z,{value:"shipping",className:c()("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"shipping"===e})},!0===o&&(0,s.createElement)(m.Z,{icon:_.Z,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,s.createElement)("span",{className:"wc-block-checkout__shipping-method-option-title"},n),!0===t&&C)},x=({checked:e,onChange:i,showPrice:t,showIcon:o,localPickupText:c,shippingText:n,shippingCostRequiresAddress:p=!1})=>{var r,a;const{shippingRates:h}=(0,l.V)();return(0,s.createElement)(u.Z,{id:"shipping-method",className:"wc-block-checkout__shipping-method-container",label:"options",onChange:i,checked:e},(0,s.createElement)(v,{checked:e,rate:(0,b.i)(null===(r=h[0])||void 0===r?void 0:r.shipping_rates),showPrice:t,showIcon:o,shippingCostRequiresAddress:p,toggleText:n||C.Z}),(0,s.createElement)(R,{checked:e,rate:(0,b.B)(null===(a=h[0])||void 0===a?void 0:a.shipping_rates),multiple:h.length>1,showPrice:t,showIcon:o,toggleText:c||C.$}))};var P=t(44750);const S=(0,n.withFilteredAttributes)(P.Z)((({title:e,description:i,showStepNumber:t,children:o,className:n,showPrice:d,showIcon:g,shippingText:u,localPickupText:m,shippingCostRequiresAddress:k})=>{const{checkoutIsProcessing:_,prefersCollection:w}=(0,r.useSelect)((e=>{const i=e(a.CHECKOUT_STORE_KEY);return{checkoutIsProcessing:i.isProcessing(),prefersCollection:i.prefersCollection()}})),{setPrefersCollection:E}=(0,r.useDispatch)(a.CHECKOUT_STORE_KEY),{shippingRates:b,needsShipping:C,hasCalculatedShipping:T,isCollectable:R}=(0,l.V)();return C&&T&&b&&R&&h.oC?(0,s.createElement)(p.Z,{id:"shipping-method",disabled:_,className:c()("wc-block-checkout__shipping-method",n),title:e,description:i,showStepNumber:t},(0,s.createElement)(x,{checked:w?"pickup":"shipping",onChange:e=>{E("pickup"===e)},showPrice:d,showIcon:g,localPickupText:m,shippingText:u,shippingCostRequiresAddress:k}),o):null}))}}]);